#!/bin/bash
#$ -cwd
#$ -j y
#$ -S /bin/bash
ulimit -c 0 
N=$1            # n�mero a fatorar
TOTAL=$2        # slots (n�vel externo)
INTERNAL=$3     # threads internas por shot

BIN="$HOME/shor/versao2/shor_sim"   # ? caminho COMPLETO do execut�vel

if [[ ! -x "$BIN" ]]; then
    echo "ERRO: bin�rio '$BIN' n�o encontrado ou sem permiss�o de execu��o" >&2
    exit 1
fi

export OMP_NUM_THREADS=$NSLOTS      # GridEngine j� define NSLOTS = TOTAL

echo ">>> $(date) | host: $(hostname)"
echo ">>> Rodando N=$N  TOTAL=$TOTAL  INTERNAL=$INTERNAL"
"$BIN" "$N" "$TOTAL" "$INTERNAL"
echo ">>> Finalizado   $(date)"
